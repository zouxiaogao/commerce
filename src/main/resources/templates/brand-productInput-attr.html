<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
    <head>
      <meta charset="utf-8">
      <link rel="stylesheet" href="../css/bootstrap.min.css">
      <link rel="stylesheet" href="../css/bootstrap-responsive.min.css">
      <link rel="stylesheet" href="../css/font-awesome.min.css">
      <link rel="stylesheet" href="../css/ace.min.css">
      <link rel="stylesheet" href="../css/ace-skins.min.css">
      <link rel="stylesheet" href="../css/ace-responsive.min.css">
      <script src="../js/bootstrap.min.js" type="text/javascript"></script>
      <script src="../js/bootbox.min.js" type="text/javascript"></script>
      <script src="../js/jquery-1.9.1.js" type="text/javascript"></script>

      <style>
        body,html{
          width: 100%;
          height: 100%;
          background: #fff;
        }
      </style>
       <script type="text/javascript">
           $(function () {
               //多选
               $('.ace-checkbox-2').change(function(){
                   if($('.ace-checkbox-2').prop('checked')){
                       $('.input').prop('checked',true);
                   }else{
                       $('.input').prop('checked',false);
                   }
               });

               $("#btnDel").click(function(){
                   alert(111)
                   if(window.confirm("是否删除")){
                       alert("删除成功！")
                   }
                   // bootbox.alert("删除成功！");
               });
           });

           function del(proId) {
               if(window.confirm("是否删除")){
                   //删除数据 用
                   $.ajax({
                       type: "GET",
                       url: "/brand-productInput-attr/delete",
                       data: {"id": proId},
                       success: function(data){//data就是 controller 中的 return 的 数据
                           if(data.code==200){
                               //刷新数据
                               alert(data.message)
                               window.location.reload();
                           }else{
                               alert(data.message);
                           }
                       }
                   });
               }
           }

       </script>


      <script type="text/javascript">
          $(function(){

              //显示所有数据  用
              $.ajax({
                  url : "/brand-productInput-attr/productlist",
                  type : "GET",
                  success : function(result){
                      $("table:last tbody:last").before(result);
                  }
              });

              //查询
              $("form[name=form1]").submit(function(){

                  $.ajax({
                      type: "GET",
                      url: "/brand-productInput-attr/search",
                      dataType: "text",
                      data: {tittle: $("#searchText").val()},
                      success: function(result){
                          $("table:last [name=productrow]").remove();
                          $("table:last tbody:last").before(result);
                      }
                  });
                  return false;
              });

          });

          //新增  编辑
          function gotoadd(proId) {
              console.log(proId)
              if(proId!=null){
                      window.location.href = "/brand-productInput-attr2/detail?id="+proId;
              }else {
                  window.location.href = "/brand-productInput-attr2";
              }

          }
      </script>
    </head>

    <body>
<div id="main-content" class="clearfix">
  <div id="page-content" class="clearfix">


    <div class="page-header position-relative">
      <h1 style="color: #2679b5;">品牌商<small><i class="icon-double-angle-right"></i> 商品信息录入</small></h1>
    </div>
    <form name="form1" class="form-search">
      商品标题：
      <input type="text" id="searchText" class="input-medium search-query">
      <button type="submit" class="btn btn-purple btn-small">Search <i class="icon-search icon-on-right"></i></button>
    </form>
    <table id="table_bug_report" class="table table-striped table-bordered table-hover">
      <thead>
        <tr>
          <th class="center">
            <label><input type="checkbox" class="ace-checkbox-2"><span class="lbl"></span></label>
          </th>
          <th>商品标题</th>
          <th>商品价格</th>
          <th>库存</th>
          <th>sku</th>

          <th>操作</th>
        </tr>
      </thead>

      <tbody>

        <tr th:fragment="productlist" th:each="product:${products}" name="productrow" id="productrow">
          <td class="center">
            <label><input type="checkbox" class="input"><span class="lbl"></span></label>
          </td>
          <td><a href="#" th:text="${product.title}">ace.com</a></td>
          <td th:text="${product.price}">$45</td>
          <td class="hidden-480" th:text="${product.price}">3,330</td>
          <td class="hidden-phone" th:text="${product.skuCd}">GM001031</td>

          <td>
            <div class="inline position-relative" >
              <button class="btn btn-mini btn-info"  th:onclick="javascript:gotoadd(([[${product.proId}]]))"><i class="icon-edit"></i></button>
              <button class="btn btn-mini btn-danger" th:onclick="javascript:del(([[${product.proId}]]))" id="btnDel" type="button"><i class="icon-trash" ></i></button>
            </div>
          </td>
        </tr>
       </tbody>
    </table>
    <button class="btn btn-primary" onclick="gotoadd()">新增</button>

  </div></div>

    </body>
</html>
