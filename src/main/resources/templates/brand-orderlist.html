<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8">

    </head>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="../css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/ace.min.css">
    <link rel="stylesheet" href="../css/ace-skins.min.css">
    <link rel="stylesheet" href="../css/ace-responsive.min.css">
  <style>
    body,html{
      width: 100%;
      height: 100%;
      background: #fff;
    }

    .info div{
        float: right;
    }

    .tabs-contents{
      padding: 20px 0;
    }
    .tab-pane{
      display: none;
    }

    .tab-pane.active{
      display: block;
    }

  </style>

    <body>

    <div id="main-content" class="clearfix">
  <div id="page-content" class="clearfix">

    <div class="page-header position-relative">
      <h1 style="color: #2679b5;">品牌商<small><i class="icon-double-angle-right"></i> 订单管理</small></h1>
    </div>
    <form class="form-search">
      商品标题：
      <input type="text" class="input-medium search-query">
      <button onclick="return false;" class="btn btn-purple btn-small">Search <i class="icon-search icon-on-right"></i></button>
    </form>

    <div class="tabbable">
      <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active" data-id="AwaitingPayment"><a data-toggle="tab" href="#"> 待支付</a></li>
        <li role="presentation" class="" data-id="AwaitingShipment"><a data-toggle="tab"  href="#" > 待发货</a></li>
        <li role="presentation" class="" data-id="shipped"><a data-toggle="tab" href="#" >已发货</a></li>
        <li role="presentation" class="" data-id="complete"><a data-toggle="tab" href="#" >已完成</a></li>
        <li role="presentation" class="" data-id="canceled"><a data-toggle="tab" href="#" >已取消</a></li>
      </ul>
      <div class="tabs-contents">
        <div id="AwaitingPayment" class="tab-pane active" >
          <p>
          <table  class="table table-striped" id="table_no_pay">
          <thead>
            <tr>
            <th>商品标题</th>
            <th>价格</th>
            <th class="hidden-480">数量</th>
            <th>sku</th>
             <th class="hidden-480">订单编号</th>
             <th class="hidden-480">订单创建时间</th>
            </tr>
          </thead>

          <tbody id="no_pay">

          </tbody>
        </table>
          </p>
        </div>
        <div id="AwaitingShipment" class="tab-pane">
          <p>
          <table id="table_wait" class="table table-striped table-bordered table-hover">
          <thead>
            <tr>
            <th>商品标题</th>
            <th>价格</th>
            <th class="hidden-480">数量</th>
            <th>sku</th>
            <th class="hidden-480">订单编号</th>
            <th class="hidden-480">订单创建时间</th>
            <th>操作</th>
            </tr>
          </thead>

          <tbody>
            <tr th:fragment="" th:each="order:${orderlist}" name="waitrow">
              <td><a href="bvo-goodsdetail.html" th:text="${order.title}">best.com</a></td>
              <td th:text="${order.salesPrice}">$75</td>
              <td class="hidden-480" th:text="${order.qty}">6,500</td>
              <td class="" th:text="${order.skuNo}">Apr 03</td>
              <td class="hidden-480" th:text="${order.orderNo}">75684894</td>
              <td th:text="${order.orderCreatedTime}">
                    2017-23-02 19:00:20
              </td>
              <td>
                <button class="btn btn-minier btn-purple send-out">发货</button>
              </td>
            </tr>
          </tbody>
          </table>
          </p>
        </div>
        <div id="shipped" class="tab-pane">
          <p>
            <table id="table_bug_report" class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                  <th>商品标题</th>
                  <th>价格</th>
                  <th class="hidden-480">数量</th>
                  <th>sku</th>
                  <th>订单编号</th>
                  <th class="hidden-480">订单创建时间</th>
                  <th class="hidden-480">物流跟踪号</th>
                  <th>操作</th>
                </tr>
              </thead>

              <tbody>

                <tr>
                  <td><a href="bvo-goodsdetail.html">ace.com</a></td>
                  <td>$45</td>
                  <td class="hidden-480">2</td>
                  <td>GM100320</td>
                  <td>
                    52223566
                  </td>
                  <td>Feb 12</td>
                  <td><a href="brand-ordertracking.html">46578990890</a></td>
                  <td>
                    <button class="btn btn-minier btn-yellow cancel">取消</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </p>
        </div>
        <div id="complete" class="tab-pane">
          <p>
            <table id="table_bug_report" class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                  <th>商品标题</th>
                  <th>价格</th>
                  <th class="hidden-480">数量</th>
                  <th>sku</th>
                  <th>订单编号</th>
                  <th class="hidden-480">订单创建时间</th>
                  <th class="hidden-480">物流跟踪号</th>

                </tr>
              </thead>

              <tbody>

                <tr>
                  <td><a href="bvo-goodsdetail.html">ace.com</a></td>
                  <td>$45</td>
                  <td class="hidden-480">3</td>
                   <td>GM100320</td>
                  <td>896777676</td>
                  <td class="hidden-phone">Feb 12</td>
                  <td class="hidden-480"><a href="brand-ordertracking.html">46578990890</a></td>
                </tr>
            </tbody>
            </table>
          </p>
        </div>
       <div id="canceled" class="tab-pane">
          <p>
            <table id="table_bug_report" class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                  <th>商品标题</th>
                  <th>价格</th>
                  <th class="hidden-480">数量</th>
                  <th>sku</th>
                  <th>订单编号</th>
                  <th class="hidden-480">订单创建时间</th>

                </tr>
              </thead>

              <tbody>
                <tr>
                  <td><a href="bvo-goodsdetail.html">base.com</a></td>
                  <td>$35</td>
                  <td class="hidden-480">2,595</td>
                  <td class="hidden-phone">Feb 18</td>
                  <td class="hidden-480">75684894</td>
                  <td>

                  </td>

                </tr>
              </tbody>
            </table>
          </p>
       </div>
      </div>
  </div>
  </div>
  </div>

    <script src="/js/jquery-1.9.1.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/bootbox.min.js"></script>
    <script type="text/javascript" src="/js/order/order.js"></script>

    <script type="text/javascript">

      $(function(){

        $('.ace-checkbox-2').each(function(){
              $('.ace-checkbox-2').change(function(){
                if($(this).prop('checked')){
                 $(this).parents('.tab-pane').find('.input').prop('checked',true);
               }else{
                $(this).parents('.tab-pane').find('.input').prop('checked',false);
              }
          })

        });

        $('.send-out').click(function(){
          bootbox.alert("已发货!");
        })
        $('.cancel').click(function(){
          bootbox.alert("订单已取消!");
        });

        //默认显示
          $.get('/brand/orderlist',{status:1},function(response){
              if(response.code === 200){
                  var data = response.data,
                      tableList = '';
                  data.forEach(function(order){
                      tableList +=
                          '<tr>'+
                          '<td><a href="bvo-goodsdetail" >'+order.title+'</a></td>'+
                          '<td>'+order.price+'</td>'+
                          '<td className="hidden-480">'+order.qty+'</td>'+
                          '<td className="">'+order.skuNo+'</td>'+
                          '<td className="hidden-480" >'+order.orderNo+'</td>'+
                          '<td>'+order.orderCreatedTime+'</td>'+
                          '</tr>'   ;
                  });
                  $('#AwaitingPayment').find('tbody').html(tableList);
              }
          });
})


      function goShip(saoId) {
          alert(saoId)
          alert("ceshi")
          $.ajax({
              type: "GET",
              url: "/brand/goShip",
              data: {"id": saoId},
              success: function(data){//data就是 controller 中的 return 的 数据
                  if(data.code==200){
                      //刷新数据
                      // alert(data.message)
                      bootbox.alert("已发货!");
                      window.location.reload();
                  }else{
                      alert(data.message);
                  }
              }
          });


      }


    </script>
    </body>
</html>
